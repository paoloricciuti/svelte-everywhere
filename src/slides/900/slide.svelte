<script lang="ts">
	import { Action } from '@animotion/core';

	const width = 200;

	let showing = $state(0);
</script>

{#each Array(5), i}
	<Action
		do={() => {
			showing = i + 1;
		}}
		undo={() => {
			showing = i;
		}}
	/>
{/each}

<main class="grid grid-cols-2 grid-rows-2 items-center gap-16">
	<svg
		class={{ showing: showing > 0 }}
		{width}
		xmlns="http://www.w3.org/2000/svg"
		xmlns:xlink="http://www.w3.org/1999/xlink"
		baseProfile="full"
		enable-background="new 0 0 1952 734.93"
		version="1.1"
		viewBox="0 0 1952 734.93"
		xml:space="preserve"
		><g
			><path
				fill="#FFF"
				fill-opacity="1"
				stroke-linejoin="round"
				stroke-width=".2"
				d="M 1436.62,603.304L 1493.01,460.705L 1655.83,460.705L 1578.56,244.39L 1675.2,0.000528336L 1952,734.933L 1747.87,734.933L 1700.57,603.304L 1436.62,603.304 Z"
			/><path
				fill="#5A0FC8"
				fill-opacity="1"
				stroke-linejoin="round"
				stroke-width=".2"
				d="M 1262.47,734.935L 1558.79,0.00156593L 1362.34,0.0025425L 1159.64,474.933L 1015.5,0.00351906L 864.499,0.00351906L 709.731,474.933L 600.585,258.517L 501.812,562.819L 602.096,734.935L 795.427,734.935L 935.284,309.025L 1068.63,734.935L 1262.47,734.935 Z"
			/><path
				fill="#FFF"
				fill-opacity="1"
				stroke-linejoin="round"
				stroke-width=".2"
				d="M 186.476,482.643L 307.479,482.643C 344.133,482.643 376.772,478.552 405.396,470.37L 436.689,373.962L 524.148,104.516C 517.484,93.9535 509.876,83.9667 501.324,74.5569C 456.419,24.852 390.719,0.000406265 304.222,0.000406265L -3.8147e-006,0.000406265L -3.8147e-006,734.933L 186.476,734.933L 186.476,482.643 Z M 346.642,169.079C 364.182,186.732 372.951,210.355 372.951,239.95C 372.951,269.772 365.238,293.424 349.813,310.906C 332.903,330.331 301.766,340.043 256.404,340.043L 186.476,340.043L 186.476,142.598L 256.918,142.598C 299.195,142.598 329.103,151.425 346.642,169.079 Z"
			/></g
		></svg
	>
	<svg
		class={{ showing: showing > 1 }}
		{width}
		xmlns="http://www.w3.org/2000/svg"
		viewBox="0 0 100 100"
	>
		<g transform="matrix(1, 0, 0, 1, 1.238094, 1.237282)">
			<g>
				<polygon
					fill="#53B9FF"
					points="15.1857575 20.6150705 0.118321575 35.7015162 23.3547581 59.0075937 0 82.4324063 15.0202921 97.5254349 38.4221054 74.0941206 61.697219 97.358019 76.7646476 82.2714921"
				></polygon>
				<polygon
					fill="#119EFF"
					points="53.5304127 59.008 38.4226337 74.0941206 61.6976254 97.3584254 76.765054 82.2718984"
				></polygon>
				<polygon
					fill-opacity="0.2"
					fill="#000000"
					points="53.5304127 59.008 38.4226337 74.0941206 44.2384254 79.8776889"
				></polygon>
				<polygon
					fill="#53B9FF"
					points="74.1217524 38.4705422 97.5238095 15.0392279 82.4498794 0 59.0547302 23.3842184 35.7777473 0.118473549 20.7103187 15.2049371 82.2893714 76.8613587 97.3568 61.7748317"
				></polygon>
				<polygon
					fill="#119EFF"
					points="43.9466667 38.4711517 59.0547302 23.3847873 35.7777473 0.119047721 20.7103187 15.205506"
				></polygon>
				<polygon
					fill-opacity="0.2"
					fill="#000000"
					points="43.9462603 38.4706235 59.0543238 23.3842997 53.2370286 17.5991873"
				></polygon>
			</g>
		</g>
	</svg>
	<svg
		class={{ showing: showing > 2 }}
		xmlns="http://www.w3.org/2000/svg"
		{width}
		preserveAspectRatio="xMidYMid"
		viewBox="0 0 256 289"
		><path
			fill="#FFC131"
			d="M178.497 104.93c0 15.155-12.285 27.44-27.44 27.44-15.153 0-27.438-12.285-27.438-27.44 0-15.153 12.285-27.438 27.439-27.438s27.439 12.285 27.439 27.439Z"
		/><circle
			cx="104.911"
			cy="183.505"
			r="27.439"
			fill="#24C8DB"
			transform="rotate(180 104.91 183.505)"
		/><path
			fill="#FFC131"
			d="M207.93 192.86a104.766 104.766 0 0 1-36.168 14.717 73.586 73.586 0 0 0 3.617-33.176c29.953-10.472 49.82-38.964 49.292-70.69-.53-31.727-21.336-59.542-51.622-69.008-30.286-9.467-63.23 1.546-81.733 27.324a122.227 122.227 0 0 0-40.16 11.723C64.86 29.536 105.956-.445 152.244.005c46.288.45 86.794 31.224 99.636 75.697 12.841 44.473-5.026 92.103-43.95 117.157ZM52.404 92.832l25.693 3.118a73.586 73.586 0 0 1 3.243-14.593 104.766 104.766 0 0 0-28.936 11.475Z"
		/><path
			fill="#24C8DB"
			d="M47.913 95.577a104.766 104.766 0 0 1 36.419-14.842 73.46 73.46 0 0 0-4.116 33.3c-29.847 10.619-49.549 39.148-48.906 70.822.642 31.673 21.484 59.38 51.738 68.78 30.253 9.399 63.127-1.62 81.604-27.352a122.227 122.227 0 0 0 40.16-11.6C191.076 258.854 150 288.785 103.748 288.33c-46.252-.453-86.733-31.184-99.602-75.612-12.87-44.427 4.92-92.037 43.768-117.141Zm155.528 100.026-.5.25.5-.25Z"
		/></svg
	>
	<svg
		class={{ showing: showing > 3 }}
		{width}
		xmlns="http://www.w3.org/2000/svg"
		viewBox="0 0 100 100"
	>
		<g style="" transform="matrix(1, 0, 0, 1, -1642.430054, -310.000031)">
			<clipPath id="a1">
				<path d="M1642.22 310h531.337v100H1642.22z"></path>
			</clipPath>
			<g clip-path="url(#a1)">
				<g transform="matrix(.09766 0 0 .09766 1642.4300256 310.0000256)">
					<clipPath id="b">
						<path
							d="M1024 256C1024 114.71 909.29 0 768 0H256C114.71 0 0 114.71 0 256v512c0 141.29 114.71 256 256 256h512c141.29 0 256-114.71 256-256V256z"
						></path>
					</clipPath>
					<g clip-path="url(#b)">
						<path
							d="M1024 0H0v1024h1024V0zM843 511.86v1.1c0 .26-.19.47-.45.49-33.36 3.13-59.48 30.24-59.48 64.41v136.95c0 9.56-2.01 18.8-5.64 27.23-10.35 24.07-33.84 41.57-61.16 41.57h-69.2l-.48-.6-269.18-337.33v337.93h-69.68c-36.89 0-66.8-29.91-66.8-66.8V577.86c0-34.17-26.11-61.28-59.48-64.41-.25-.02-.45-.23-.45-.49v-1.1c0-.25.19-.46.45-.49 33.24-3.24 59.22-31.02 59.22-65.11V307.19c0-9.29 1.9-18.14 5.33-26.18 10.18-23.88 33.87-40.62 61.47-40.62h69.66l.28.35 269.18 337.34V240.39h69.94c36.89 0 66.8 29.91 66.8 66.8v139.07c0 34.09 25.98 61.87 59.22 65.11.26.03.45.24.45.49z"
							fill="#fff"
						></path>
					</g>
				</g>
			</g>
		</g>
	</svg>
</main>

{#if showing > 4}
	<svg
		xmlns="http://www.w3.org/2000/svg"
		width={width * 3}
		class="showing lynx absolute"
		viewBox="0 0 40 40"
		fill="none"
	>
		<path
			fill-rule="evenodd"
			clip-rule="evenodd"
			d="M10.7478 8.85145L5.42747 12.4521C4.84928 12.8434 4.44897 13.4315 4.30835 14.096L3.78819 16.5541C3.76061 16.6845 3.69946 16.8061 3.61028 16.9081L1.19608 20.0176C0.871038 20.3891 0.878876 21.3762 1.76916 22.0084C2.11056 22.3007 2.56701 22.9561 3.08619 23.7016C4.18546 25.2801 5.566 27.2625 6.73131 27.0566C8.3803 26.4874 10.3988 26.3053 11.9486 27.0566C16.7714 30.9317 13.1435 33.1123 11.9486 40C12.5875 36.317 15.9661 30.022 23.1082 26.6208C22.051 25.7723 19.302 25.1404 17.3931 24.9506C17.3931 24.9506 23.2579 20.0176 30.4913 17.7507C25.4417 5.94586 17.1065 0.304425 17.1065 0.304425C16.6818 -0.211712 15.8241 -0.0423878 15.6471 0.592541C15.5049 2.45876 15.2693 3.72778 14.8802 4.924L11.9486 1.60043C11.6424 1.23773 11.0302 1.44716 11.0333 1.91358C11.5296 4.62461 11.4599 6.14635 10.7478 8.85145ZM16.7775 2.51681C18.7865 5.92742 19.6965 7.86501 20.0052 11.481C17.8682 10.2883 16.9371 9.98479 15.3656 9.99234C16.2823 7.25343 16.5624 5.60419 16.7775 2.51681Z"
			fill="black"
		/>
		<path
			d="M29.677 27.4061C21.494 29.2458 16.4798 32.3991 12.301 39.9996C18.6825 29.4804 39.0001 31.3616 39.0001 31.3616C37.8944 29.491 34.8054 26.025 32.2723 24.357C32.2723 24.357 33.3344 22.3866 39.0001 20.7634C39.0001 20.7634 29.677 20.0193 24.2983 23.9865C26.2453 24.6936 28.4389 25.8913 29.677 27.4061Z"
			fill="black"
		/>
	</svg>
{/if}

<style>
	svg {
		opacity: 0.3;
		transition: opacity 250ms;
	}
	svg.showing {
		opacity: 1;
	}

	.lynx {
		animation: lynx 1s ease-out forwards;
		filter: drop-shadow(0 0 1.5rem white);
	}

	@keyframes lynx {
		0% {
			opacity: 0;
			transform: rotate(360deg) scale(2);
		}
		100% {
			opacity: 1;
			transform: rotate(30deg) scale(1);
		}
	}
</style>
